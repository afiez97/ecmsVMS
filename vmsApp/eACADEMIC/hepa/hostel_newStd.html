<!-- HEADER INSERT -->
<div class="app-header white bg b-b">
  <div class="navbar" data-pjax>
    <a data-toggle="modal" data-target="#aside" class="navbar-item pull-left hidden-lg-up p-r m-a-0">
      <i class="ion-navicon"></i>
    </a>

    <ul class="nav navbar-nav">
      <li class="nav-item">
        <span class="navbar-item text-md">Hostel</span>
      </li>

      <!-- <li class="nav-item hideObj text-right">
        <a class="nav-link text-muted" data-toggle="modal" data-target="#mdlUnreside" id="carianPljar">
          <span class="">
            <i class="fa fa-ban"></i>
            <span class="hidden-sm-down">Unreside Student</span>
          </span>
        </a>
      </li>
      <li class="nav-item hideObj text-right">
        <a class="nav-link text-muted" data-toggle="modal" data-target="#mdlAssigned" id="AssignedReportingBtn">
          <span class="">
            <i class="fa fa-ban"></i>
            <span class="hidden-sm-down">Assigned Student</span>
          </span>
        </a>
      </li> -->
    </ul>
    <!-- nabar right -->
    <ul class="nav navbar-nav pull-right" id="template-header"> </ul>
  </div>
</div>

<!-- FOOTER INSERT  -->
<div class="app-footer white bg p-a b-t" id="template-footer"> </div>

<div class="app-body">

  <!-- CONTENT START -->
  <div style="min-height: mh-200">
    <div class="col-md-10 offset-md-1 mt-2">
      <div class="box">
        <div class="box-header lime-900">
          <h3><b>STUDENT LIST</b></h3>
        </div>
        <div class="box-body b-b">
          <p class="m-a-0">
          <div id="">
            <textarea class="hidden" id="dataStdList"></textarea>
            <table id="regStdList" class="table table-striped m-b-none"></table>
          </div>
          </p>
        </div>
      </div>


      <!-------------------------------------------------- modal add -------------------------------------------------->
      <div id="addForm" class="modal fade" data-backdrop="static">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <form role="form" id="formAdd">
              <div class="modal-header lime-900">
                <h5 class="modal-title">ASSIGN HOSTEL</h5>
              </div>
              <div class="modal-body p-lg">
                <p>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Campus</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="clg_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Matric No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="std_studentid" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Name</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="sti_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">IC No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" id="sti_icno" disabled>
                      </div>
                    </div>

                    <div class="form-group row m-b-0">
                      <label class="col-sm-3 form-control-label">Gender</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="sti_gender_name" disabled>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Campus<span class="text-danger"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="branch_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Campus to view list">
                      <label class="col-sm-3 form-control-label">Hostel<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="hostel_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Hostel to view list">
                      <label class="col-sm-3 form-control-label">Block<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="block_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Block to view list">
                      <label class="col-sm-3 form-control-label">Room<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="room_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row m-b-0">
                      <label for="" class="col-sm-3 form-control-label">Check-in Date</label>
                      <div class="col-sm-9">
                        <input type="date" class="form-control" id="expected_chkInDate" required>
                      </div>
                    </div>
                  </div>
                </div>
                </p>
              </div>
              <div class="modal-footer">
                <!-- <button type="button" class="btn danger p-x-md" value="Delete">Delete</button> -->
                <!-- <button id="deleteButton" type="button" class="btn danger p-x-md" value="Delete">Delete</button> -->
                <button type="button" id="deleteButton" class="btn danger p-x-md">Delete</button>

                <!-- <button type="button" id="deleteButton" class="btn danger p-x-md" value="Delete" data-toggle="" >Delete</button> -->
                <!-- <button type="button" id="deleteButton" class="btn danger p-x-md" value="Delete" data-toggle="modal" data-target="#DeleteForm">Delete</button> -->

                <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                <input type="submit" class="btn info p-x-md" value="Submit">
              </div>
            </form>
          </div><!-- /.modal-content -->
        </div>
      </div>
      <!-------------------------------------------------- end modal add -------------------------------------------------->


      <!-------------------------------------------------- modal del -------------------------------------------------->
      <div id="DeleteForm" class="modal fade" data-backdrop="static">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <form role="form" id="formDelete">
              <div class="modal-header teal-700">
                <h5 class="modal-title">NOT RESIDE HOSTEL</h5>
              </div>
              <div class="modal-body p-lg">
                <p>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Campus</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="del_clg_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Matric No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="del_std_studentid" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Name</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="del_sti_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">IC No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" id="del_sti_icno" disabled>
                      </div>
                    </div>

                    <div class="form-group row m-b-0">
                      <label class="col-sm-3 form-control-label">Gender</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="del_sti_gender_name" disabled>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Reason<span class="text-danger"> *</span></label>
                      <div class="col-sm-9">
                        <!-- <select class="form-control" id="branch_id" required></select>
                                         -->
                        <select class="form-control" id="del_reason" required>
                          <option value="">- Choose -</option>
                          <!-- <option value="Deferred">Deferred</option>
                                          <option value="Withdraw">Withdraw</option>
                                          <option value="Graduated">Graduated</option>
                                          <option value="Practical">Practical</option> -->
                          <option value="Not Reside Hostel">Not Reside Hostel</option>
                        </select>

                        </select>
                      </div>
                    </div>


                  </div>
                </div>
                </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                <input type="submit" class="btn info p-x-md" value="Save">
              </div>
            </form>
          </div>

        </div>
      </div>

      <!-------------------------------------------------- end modal del -------------------------------------------------->

      <!-------------------------------------------------- modal update -------------------------------------------------->
      <div id="updateForm" class="modal fade" data-backdrop="static">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <form role="form" id="formUpdate">
              <a data-dismiss="modal" class="pull-right text-muted text-lg p-a-sm m-r-sm">×</a>
              <div class="modal-header lime-900">
                <h5 class="modal-title">UPDATE HOSTEL</h5>
              </div>
              <div class="modal-body p-lg">
                <p>
                <div class="row">
                  <input type="text" class="form-control text-uppercase" id="upt_checkIn_status" hidden>
                  <input type="text" class="form-control text-uppercase" id="upt_reason" hidden>
                  <input type="hidden" class="form-control text-uppercase" id="indexVal" hidden>

                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Campus</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="upt_clg_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Matric No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="upt_std_studentid" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Name</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="upt_sti_name" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">IC No.</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control" id="upt_sti_icno" disabled>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Gender</label>
                      <div class="col-sm-9">
                        <input type="text" class="form-control text-uppercase" id="upt_sti_gender_name" disabled>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <input type="hidden" id="chkInOutId">
                    <div class="form-group row">
                      <label class="col-sm-3 form-control-label">Campus<span class="text-danger"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="upt_branch_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Campus to view list">
                      <label class="col-sm-3 form-control-label">Hostel<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="upt_hostel_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Hostel to view list">
                      <label class="col-sm-3 form-control-label">Block<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="upt_block_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row" title="Select Block to view list">
                      <label class="col-sm-3 form-control-label">Room<span class="text-info"> *</span></label>
                      <div class="col-sm-9">
                        <select class="form-control c-select formInput" id="upt_room_id" required></select>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label for="" class="col-sm-3 form-control-label">Check-in Date</label>
                      <div class="col-sm-9">
                        <input type="date" class="form-control" id="upt_expected_chkInDate" required>
                      </div>
                    </div>
                  </div>
                </div>
                </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                <input type="submit" class="btn success p-x-md" value="Update">
              </div>
            </form>
          </div><!-- /.modal-content -->
        </div>
      </div>
      <!-------------------------------------------------- end modal update -------------------------------------------------->

      <!-------------------------------------------------- modal Unreside -------------------------------------------------->
      <div id="mdlUnreside" class="modal fade" data-backdrop="true" display="block">
        <div class="modal-dialog modal-lg fade-right-big " style="max-width: 80% !important;">
          <div class="modal-content lime-50">
            <div class="modal-header lime-900">
              <h5 class="modal-title">Report Unreside Student</h5>
            </div>
            <div id="" class="modal-body text-center p-lg" style="height: 30vw;">
              <div class="row">
                <div class="col-sm-12">
                  <div id="" class="box">
                    <div class="box-header">
                      <h3 class="pull-left">Unreside Student Report</h3>

                      <div class="row">

                        <div class="box">
                          <!-- <div class="box-header">
                                      <h2>Inline form</h2>
                                      <small>Add ".form-inline" to your &lt;form&gt; for left-aligned and inline-block controls. This only applies to forms within viewports that are at least 768px wide.</small>
                                    </div> -->
                          <div class="box-body p-v-md">
                            <form id="formFilterUnreside" class="form-inline" role="form">
                              <div class="form-group mb-2">
                                <label for="chkInOutdateUnreside" class="col-form-label">Month:</label>
                                <input id="chkInOutdateUnreside" type="month" class="form-control" placeholder="Date">
                              </div>
                              <!-- <div class="form-group mb-2">
                                <label for="FK_status_Student" class="col-form-label">Status Student:</label>
                                <select id="FK_status_Student" class="form-control c-select">
                                  <option value="">--Choose Status Student--</option>
                                  <option value="1">Active</option>
                                  <option value="2">Alumni</option>
                                  <option value="3">Paid</option>
                                  <option value="4">Registered</option>
                                  <option value="5">Suspended</option>
                                  <option value="6">Extend</option>
                                  <option value="7">With-draw</option>
                                  <option value="8">Graduated</option>
                                  <option value="9">In-active</option>
                                  <option value="10">Deferred</option>
                                  <option value="11">Missing In Action</option>
                                  <option value="12">Passed Away</option>
                                  <option value="13">Terminated</option>
                                  <option value="14">Change Programme</option>

                                </select>
                              </div> -->

                              <button type="submit" class="btn btn-info mb-2">Filter</button>
                            </form>
                          </div>

                          <div class="box-divider m-a-0"></div>

                        </div>


                      </div>
                    </div>
                    <table id="report_UnresideHostel" class="table"> </table>
                    <!-- <table id="report_OutHostel" class="table"> </table> -->
                  </div>

                  <!-- <button style="margin-right: 5%;" id="" onclick="generatePDF('Check_out', 'report_OutHostel')" class="md-btn md-raised green pull-right">             <i class="fa fa-fw fa-pencil-square-o"></i>Download PDF</button> -->

                </div>

              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-danger p-x-md" id=""
                onclick="generatePDF('Unreside Student', 'report_UnresideHostel','chkInOutdateUnreside')"><i class="fa fa-file-pdf-o"></i>
                Print</button>

              <button type="button" class="btn dark-white p-x-md" data-dismiss="modal">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div>
      </div>
      <!-------------------------------------------------- modal Unreside -------------------------------------------------->

      <!-------------------------------------------------- modal Assigned -------------------------------------------------->
      <div id="mdlAssigned" class="modal fade" data-backdrop="true" display="block">
        <div class="modal-dialog modal-lg fade-right-big " style="max-width: 80% !important;">
          <div class="modal-content lime-50">
            <div class="modal-header lime-900">
              <h5 class="modal-title">Report Assigned Student</h5>
            </div>
            <div id="" class="modal-body text-center p-lg" style="height: 30vw;">
              <div class="row">
                <div class="col-sm-12">
                  <div id="" class="box">
                    <div class="box-header">
                      <h3 class="pull-left">Assigned Student Report</h3>

                      <div class="row">

                        <div class="box">
                          <!-- <div class="box-header">
                                      <h2>Inline form</h2>
                                      <small>Add ".form-inline" to your &lt;form&gt; for left-aligned and inline-block controls. This only applies to forms within viewports that are at least 768px wide.</small>
                                    </div> -->
                          <div class="box-body p-v-md">
                            <form id="formFilterHostelDet" class="form-inline" role="form">
                              <div class="form-group mb-2">
                                <label for="chkInOutdate" class="col-form-label">Month:</label>
                                <input id="chkInOutdate" type="month" class="form-control" placeholder="Date">
                              </div>
                              <div class="form-group mb-2">
                                <label for="FK_status_Student" class="col-form-label">Status Student:</label>
                                <select id="FK_status_Student" class="form-control c-select">
                                  <option value="">--Choose Status Student--</option>
                                  <option value="1">Active</option>
                                  <option value="2">Alumni</option>
                                  <option value="3">Paid</option>
                                  <option value="4">Registered</option>
                                  <option value="5">Suspended</option>
                                  <option value="6">Extend</option>
                                  <option value="7">With-draw</option>
                                  <option value="8">Graduated</option>
                                  <option value="9">In-active</option>
                                  <option value="10">Deferred</option>
                                  <option value="11">Missing In Action</option>
                                  <option value="12">Passed Away</option>
                                  <option value="13">Terminated</option>
                                  <option value="14">Change Programme</option>

                                </select>
                              </div>

                              <button type="submit" class="btn btn-info mb-2">Filter</button>
                            </form>
                          </div>

                          <div class="box-divider m-a-0"></div>

                        </div>


                      </div>
                    </div>
                    <table id="report_AssignedHostel" class="table"> </table>
                    <table id="report_AssignedHostelPDF" class="none"> </table>
                    <!-- <table id="report_OutHostel" class="table"> </table> -->
                  </div>

                  <!-- <button style="margin-right: 5%;" id="" onclick="generatePDF('Check_out', 'report_OutHostel')" class="md-btn md-raised green pull-right">             <i class="fa fa-fw fa-pencil-square-o"></i>Download PDF</button> -->

                </div>

              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-danger p-x-md" id=""
                onclick="generatePDF('Assigned Hostel', 'report_AssignedHostelPDF','chkInOutdate')"><i class="fa fa-file-pdf-o"></i>
                Print</button>

              <button type="button" class="btn dark-white p-x-md" data-dismiss="modal">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div>
      </div>
      <!-------------------------------------------------- modal Assigned -------------------------------------------------->



    </div>
  </div>
</div>

<script src="scripts/jspdf.umd.min.js"></script>
<script src="scripts/jspdf.plugin.autotable.js"></script>
<script src="scripts/html2canvas.min.js"></script>
<script src="callFunction.js"></script>
<script src="scripts/ajax.js"></script>
<script src="hostel_newStd_new.js"></script>

<script>
  function generatePDF(name, idTable, date) {
    if (date === 'undefined' || $('#' + date + '').val() === '') {
     datePDf = "";
      
    } else {
     datePDf = " ("+$('#'+date+'').val()+")";
    }



    window.jsPDF = window.jspdf.jsPDF; //nie pnting utk call jspdf pnya library
    var doc = new jsPDF({
        orientation: "portrait",
        unit: "mm",
        format: "a4",
    });


    // Create a gradient effect with three colors (purple, maroon, red) on the left side
    var gradientColors = ['#743d89', '#973d78', '#ac3869'];
    var gradientWidth = 1.4; // Width of each color segment
    var gradientHeight = doc.internal.pageSize.height;

    for (var i = 0; i < gradientColors.length; i++) {
        doc.setFillColor(gradientColors[i]);
        doc.rect(i * gradientWidth, 0, gradientWidth, gradientHeight, 'F');
    }

    var a4Width = 210;

    // Image dimensions
    var originalWidth = 275.59; // Replace with the actual width of your image
    var originalHeight = 67.818; // Replace with the actual height of your image

    // Calculate the new width and height (60% of A4 width while maintaining aspect ratio)
    var newWidth = 0.6 * a4Width;
    var newHeight = (newWidth / originalWidth) * originalHeight;

    // Calculate the X-coordinate to center the image on the A4 page
    var xCoordinate = (a4Width - newWidth) / 2;

    // Add the image to the document with the calculated width, height, and centered position
    doc.addImage("images/logo_reporting.png", "JPEG", xCoordinate, 10, newWidth, newHeight);

    doc.setFont("helvetica", "bold");
    var textCenterX = doc.internal.pageSize.width / 2;
    doc.setFontSize(14); // Set the font size to 10
    doc.text('BAHAGIAN HAL EHWAL PELAJAR DAN ALUMNI', textCenterX, 50, { align: "center" });

    doc.setFont("helvetica", "bold");
    doc.setFontSize(13); // Set the font size to 8
    var textCenterX = doc.internal.pageSize.width / 2;
    doc.text('UNIT PENGURUSAN HOSTEL', textCenterX, 58, { align: "center" });

    
    const text = "Reporting " + name + ""+ datePDf;
    doc.setFontSize(15);
    // Set the font type for the text
    doc.setFont("helvetica", "bold");
    const textWidth = doc.getTextWidth(text);
    // Set the position for the text
    const textX = 20; // X position
    const textY = 80; // Y position


    doc.text(text, textX, textY);

    // Set the underline color
    doc.setDrawColor(0, 0, 0); // RGB color for the underline

    // Draw the original-size underline
    const underlineLength1 = textWidth + 20; // Length of the underline
    const underlineWidth1 = 1.5; // Width of the underline
    doc.setLineWidth(underlineWidth1);
    doc.line(textX, textY + 2, textX + underlineLength1, textY + 2);

    // Set the color for the second underline (purple)
    doc.setDrawColor(128, 0, 128); // RGB color for purple

    // Draw the second underline with double the width
    const underlineLength2 = textWidth * (30 / 100); // Same length as the first underline
    const underlineWidth2 = underlineWidth1 * 2; // Double the width
    doc.setLineWidth(underlineWidth2);
    doc.line(textX, textY + 2, textX + underlineLength2, textY + 2);



    // Define the source element (your HTML table)
    var source = $('#' + idTable)[0];



    // Generate the PDF from the table, starting below the text
    doc.autoTable({
      html: source,
      startY: 100, // Adjusted start position below the text
      margin: { top: 40 },
      theme: 'grid',
      styles: { fillColor: false, textColor: 0 },
      headerStyles: { fillColor: '#9c4298', textColor: 255 },
    });
    doc.addImage("images/footer_reporting.png", "JPEG", 6, 276, 200, 20);

    // Save or download the PDF
    doc.save('Reporting_' + name + '.pdf');
    // doc.save('Reporting_change_hostel.pdf');
  }


</script>