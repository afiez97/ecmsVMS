<!-- HEADER INSERT -->
<div class="app-header white bg b-b">
  <div class="navbar" data-pjax>
    <a data-toggle="modal" data-target="#aside" class="navbar-item pull-left hidden-lg-up p-r m-a-0">
      <i class="ion-navicon"></i>
    </a>

    <ul class="nav navbar-nav">
      <li class="nav-item">
        <span class="navbar-item text-md">Detail</span>
      </li>
      <li class="nav-item">
        <a class="nav-link text-muted" data-toggle="modal" data-target="#add-compound" id="modalNew">
          <span class="">
            <i class="fa fa-fw fa-plus"></i>
            <span class="hidden-sm-down">New Record</span>
          </span>
        </a>
      </li>
      <!-- <li class="nav-item" id="reportCounseling">
        <a class="nav-link text-muted" data-toggle="modal" data-target="#mdl_reportTableCons">
          <span class=""> <i class="fa fa-fw fa-pencil-square-o"></i>
            <span class="hidden-sm-down">Reporting For Discipline
            </span>
          </span>
        </a>
      </li> -->
    </ul>
    <!-- nabar right -->
    <ul class="nav navbar-nav pull-right" id="template-header">
      <li class="nav-item">
        <span class="navbar-item m-r-0 text-md">Total Compound:</span>
      </li>
      <li class="nav-item">
        <a class="nav-link">
          <span id="totalcompound" class="label label-lg rounded">
            55
          </span>
        </a>
      </li>

    </ul>
  </div>
</div>

<!-- FOOTER INSERT  -->
<div class="app-footer white bg p-a b-t" id="template-footer"> </div>

<div class="app-body">

  <!-- CONTENT START -->
  <div style="min-height: mh-200">
    <div class="col-md-10 offset-md-1 mt-2">
      <div class="box">
        <div class="box-header blue-700">
          <h3><b>Detail</b></h3>
        </div>
        <div class="box-body light lt">
          <p class="m-a-0">

          <div id="tableCompound">
            <textarea class="hidden" id="dataList"></textarea>
            <table id="compoundList" class="table m-b-none"></table>


            <div class="row">
              <!-- <button id="" class="md-btn pull-right md-raised m-b-sm w-xs indigo generateExcel"
               onclick="excelGen('compoundList')" style="margin-right: 30px;">Download</button> -->
            </div>
          </div>

          <!-------------------------------------------------- modal add Compound -------------------------------------------------->
          <div id="add-compound" class="modal fade" data-backdrop="static">
            <div class="modal-dialog modal-lg">
              <div class="modal-content" id="other">
                <form role="form" id="formAddCompound">
                  <div class="modal-header blue-700">
                    <h5 class="modal-title">ADD DISCIPLINE</h5>
                  </div>
                  <div class="modal-body p-lg">
                    <p>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row ">
                          <label for="" class="col-sm-3 form-control-label ">Campus<span class="text-danger">
                              *</span></label>
                          <div class="col-sm-9">
                            <select class="form-control c-select" id="clg_id"></select>
                          </div>
                        </div>

                        <div class="form-group row ">
                          <label for="" class="col-sm-3 form-control-label ">Matric No.<span class="text-danger">
                              *</span></label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control chkStd" id="stud_icno" placeholder="Matric No.">
                            <span class="text-danger check"></span>
                          </div>
                        </div>
                        <div class="form-group row">
                          <label class="col-sm-3 form-control-label">Name</label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control text-uppercase" id="compound_sti_name" disabled="">
                          </div>
                        </div>
                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Date</label>
                          <div class="col-sm-9">
                            <input type="date" class="form-control" id="dis_date" placeholder="Date">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Time</label>
                          <div class="col-sm-9">
                            <input type="time" class="form-control" id="dis_time" placeholder="Time">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Venue</label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control" id="dis_venue" placeholder="Venue">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Action</label>
                          <div class="col-sm-9">
                            <!-- <input type="text" class="form-control" id="dis_action" placeholder="Action"> -->
                            <select class="form-control c-select" id="dis_action">
                              <option value="">- Choose -</option>
                              <option value="Warning">Warning</option>
                              <option value="Compound">Compound</option>
                              <option value="Compound">Jawatankuasa Tindakan Tataterbib Pelajar (Sahsiah)</option>
                              <option value="Compound">Jawatankuasa Tindakan Tatatertib Pelajar (Akademik)</option>
                              <option value="Compound">Rujuk Kaunselor</option>

                            </select>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Amount</label>
                          <div class="col-sm-9">
                            <input type="number" class="form-control" id="dis_amount" placeholder="RM" step="0.01">
                          </div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Reference No.<span
                              class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control" id="dis_refNo" placeholder="Reference No." required>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Discipline Type</label>
                          <div class="col-sm-9">
                            <select class="form-control c-select slct2" id="dis_type"></select>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Issue</label>
                          <div class="col-sm-9">
                            <textarea class="form-control" rows="3" id="dis_issue" placeholder="Issue"></textarea>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Remark</label>
                          <div class="col-sm-9">
                            <textarea class="form-control" rows="3" id="dis_remark" placeholder="Remark"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    </p>
                  </div>
                  <div class="modal-footer ">
                    <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                    <input type="submit" class="btn info p-x-md btnSave" value="Save">
                  </div>
                </form>
              </div><!-- /.modal-content -->
            </div>
          </div>
          <!-------------------------------------------------- end modal add Compound -------------------------------------------------->

          <!-------------------------------------------------- modal update Compound -------------------------------------------------->
          <div id="update-compound" class="modal fade" data-backdrop="static">
            <div class="modal-dialog modal-lg">
              <div class="modal-content" id="">
                <form role="form" id="formUptCompound">
                  <div class="modal-header blue-700">
                    <h5 class="modal-title">UPDATE DISCIPLINE</h5>
                  </div>
                  <div class="modal-body p-lg">
                    <p>
                    <div class="row">
                      <div class="col-md-6">
                        <input type="hidden" id="pk_id">
                        <div class="form-group row ">
                          <label for="" class="col-sm-3 form-control-label ">Campus<span class="text-danger">
                              *</span></label>
                          <div class="col-sm-9">
                            <select class="form-control c-select" id="upt_clg_id"></select>
                          </div>
                        </div>

                        <div class="form-group row ">
                          <label for="" class="col-sm-3 form-control-label ">Matric No.<span class="text-danger">
                              *</span></label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control chkStd" id="upt_stud_icno" placeholder="Matric No.">
                            <span class="text-danger check"></span>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Date</label>
                          <div class="col-sm-9">
                            <input type="date" class="form-control" id="upt_dis_date" placeholder="Date">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Time</label>
                          <div class="col-sm-9">
                            <input type="time" class="form-control" id="upt_dis_time" placeholder="Time">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Venue</label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control" id="upt_dis_venue" placeholder="Venue">
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Action</label>
                          <div class="col-sm-9">
                            <!-- <input type="text" class="form-control" id="dis_action" placeholder="Action"> -->
                            <select class="form-control c-select" id="upt_dis_action">
                              <option value="">- Choose -</option>
                              <option value="WARNING">Warning</option>
                              <option value="COMPOUND">Compound</option>
                              <option value="Compound">Jawatankuasa Tindakan Tataterbib Pelajar (Sahsiah)</option>
                              <option value="Compound">Jawatankuasa Tindakan Tatatertib Pelajar (Akademik)</option>
                              <option value="Compound">Rujuk Kaunselor</option>
                            </select>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Amount</label>
                          <div class="col-sm-9">
                            <input type="number" class="form-control" id="upt_dis_amount" placeholder="RM" step="0.01">
                          </div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Reference No.<span
                              class="text-danger">*</span></label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control" id="upt_dis_refNo" placeholder="Reference No."
                              readonly>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Discipline Type</label>
                          <div class="col-sm-9">
                            <select class="form-control c-select slct2" id="upt_dis_type"></select>
                            <!-- <input type="text" class="form-control" id="" placeholder="Discipline Type"> -->
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Issue</label>
                          <div class="col-sm-9">
                            <textarea class="form-control" rows="3" id="upt_dis_issue" placeholder="Issue"></textarea>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Remark</label>
                          <div class="col-sm-9">
                            <textarea class="form-control" rows="3" id="upt_dis_remark" placeholder="Remark"></textarea>
                          </div>
                        </div>

                        <div class="form-group row">
                          <label for="" class="col-sm-3 form-control-label">Status<span class="text-danger">
                              *</span></label>
                          <div class="col-sm-9">
                            <select class="form-control c-select" id="upt_dis_pay_status" required>
                              <option value="">- Choose -</option>
                              <option value="New">New</option>
                              <option value="Paid">Paid</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                    </p>
                  </div>
                  <div class="modal-footer ">
                    <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                    <input type="submit" class="btn success p-x-md btnSave" value="Update">
                  </div>
                </form>
              </div><!-- /.modal-content -->
            </div>
          </div>
          <!-------------------------------------------------- end modal update Compound -------------------------------------------------->

          <!-------------------------------------------------- modal view Compound -------------------------------------------------->
          <div id="viewCompound" class="modal fade" data-backdrop="static">
            <div class="modal-dialog modal-lg">
              <div class="modal-content" id="">
                <div class="modal-header blue-700">
                  <h5 class="modal-title">DETAILS</h5>
                </div>
                <form id="formPaid">
                  <div class="modal-body p-lg">
                    <p>
                      <input type="hidden" id="view_pk_id">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Campus</div>
                          <div class="col-sm-9 text-uppercase" id="view_clg_id"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Date/Time</div>
                          <div class="col-sm-9 text-uppercase"><span id="view_dis_date"></span> / <span
                              id="view_dis_time"></span></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Venue</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_venue"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Action</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_action"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Amount</div>
                          <div class="col-sm-9" id="view_dis_amount"></div>
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Reference No.</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_refNo"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Type</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_type"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Issue</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_issue"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Remark</div>
                          <div class="col-sm-9 text-uppercase" id="view_dis_remark"></div>
                        </div>

                        <div class="form-group row">
                          <div class="col-sm-3 font-weight-bold">Status</div>
                          <div class="col-sm-9" id="view_dis_pay_status"></div>
                        </div>
                      </div>
                    </div>
                    </p>
                  </div>
                  <div class="modal-footer ">
                    <button type="button" class="btn white p-x-md" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn success p-x-md" id="btnPaid">Paid</button>
                  </div>
                </form>
              </div><!-- /.modal-content -->
            </div>
          </div>
          <!-------------------------------------------------- end modal view Compound -------------------------------------------------->



          <!-------------------------------------------------- modal generate pdf programme -------------------------------------------------->
          <div id="mdl_reportTableCons" class="modal fade" data-backdrop="true" display="block">
            <div class="modal-dialog modal-lg fade-right-big " style="max-width: 80% !important;">
              <div class="modal-content blue-50">
                <div class="modal-header blue-700">
                  <h5 class="modal-title">Reporting Discipline</h5>
                </div>
                <div id="" class="modal-body text-center p-lg" style="height: 30vw;">
                  <div class="row">
                    <div class="col-sm-12">
                      <div id="" class="box">
                        <div class="box-header">
                          <!-- <span class="label danger pull-right">6</span> -->
                          <h3 class="pull-left">Reporting Discipline</h3>
                        </div>
                        <table id="reportTableDisc" class="table">

                        </table>
                      </div>


                      <!-- <button class="pdfexport">Export to PDF</button> -->
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button id="HAHAHA" class="btn md-raised green"> <i class="fa fa-fw  fa-file-pdf-o"></i>
                    Download PDF</button>
                  <button type="button" class="btn dark-white p-x-md" data-dismiss="modal">Close</button>
                  <!-- <button type="button" class="btn danger p-x-md" data-dismiss="modal">Yes</button> -->
                </div>
              </div><!-- /.modal-content -->
            </div>
          </div>
          <!-------------------------------------------------- modal generate pdf -------------------------------------------------->

          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="scripts/jspdf.umd.min.js"></script>
<script src="scripts/jspdf.plugin.autotable.js"></script>
<script src="callFunction.js"></script>
<script src="scripts/ajax.js"></script>
<script src="compound.js"></script>
<script>
  window.jsPDF = window.jspdf.jsPDF; //nie pnting utk call jspdf pnya library
  $("#HAHAHA").on("click", function () {
    // Initialize jsPDF
    var doc = new jsPDF({
        orientation: "portrait",
        unit: "mm",
        format: "a4",
    });

    // Create a gradient effect with three colors (purple, maroon, red) on the left side
    var gradientColors = ['#743d89', '#973d78', '#ac3869'];
    var gradientWidth = 1.4; // Width of each color segment
    var gradientHeight = doc.internal.pageSize.height;

    for (var i = 0; i < gradientColors.length; i++) {
        doc.setFillColor(gradientColors[i]);
        doc.rect(i * gradientWidth, 0, gradientWidth, gradientHeight, 'F');
    }

    var a4Width = 210;

    // Image dimensions
    var originalWidth = 275.59; // Replace with the actual width of your image
    var originalHeight = 67.818; // Replace with the actual height of your image

    // Calculate the new width and height (60% of A4 width while maintaining aspect ratio)
    var newWidth = 0.6 * a4Width;
    var newHeight = (newWidth / originalWidth) * originalHeight;

    // Calculate the X-coordinate to center the image on the A4 page
    var xCoordinate = (a4Width - newWidth) / 2;

    // Add the image to the document with the calculated width, height, and centered position
    doc.addImage("images/logo_reporting.png", "JPEG", xCoordinate, 10, newWidth, newHeight);

    doc.setFont("helvetica", "bold");
    var textCenterX = doc.internal.pageSize.width / 2;
    doc.setFontSize(14); // Set the font size to 10
    doc.text('BAHAGIAN HAL EHWAL PELAJAR DAN ALUMNI', textCenterX, 50, { align: "center" });

    doc.setFont("helvetica", "bold");
    doc.setFontSize(13); // Set the font size to 8
    var textCenterX = doc.internal.pageSize.width / 2;
    doc.text('UNIT PEMBANGUNAN HOLISTIK MAHASISWA', textCenterX, 58, { align: "center" });

    const text = "REPORTING DISCIPLINE";
    doc.setFontSize(15);
    // Set the font type for the text
    doc.setFont("helvetica", "bold");
    const textWidth = doc.getTextWidth(text);
    // Set the position for the text
    const textX = 20; // X position
    const textY = 80; // Y position


    doc.text(text, textX, textY);

    // Set the underline color
    doc.setDrawColor(0, 0, 0); // RGB color for the underline

    // Draw the original-size underline
    const underlineLength1 = textWidth + 20; // Length of the underline
    const underlineWidth1 = 1.5; // Width of the underline
    doc.setLineWidth(underlineWidth1);
    doc.line(textX, textY + 2, textX + underlineLength1, textY + 2);

    // Set the color for the second underline (purple)
    doc.setDrawColor(128, 0, 128); // RGB color for purple

    // Draw the second underline with double the width
    const underlineLength2 = textWidth * (30 / 100); // Same length as the first underline
    const underlineWidth2 = underlineWidth1 * 2; // Double the width
    doc.setLineWidth(underlineWidth2);
    doc.line(textX, textY + 2, textX + underlineLength2, textY + 2);


    // Define the source element (your HTML table)
    var source = $('#reportTableDisc')[0];


    // Generate the PDF from the table, starting below the text
    doc.autoTable({
      html: source,
      startY: 100, // Adjusted start position below the text
      margin: { top: 40 },
      theme: 'grid',
      styles: { fillColor: false, textColor: 0 },
      // headerStyles: { fillColor: '#9c4298', textColor: 255 },
      headStyles: { fillColor: '#9c4298', textColor: 255 }, // Use headStyles instead of headerStyles

    });
    doc.addImage("images/footer_reporting.png", "JPEG", 6, 276, 200, 20);


    // Save or download the PDF
    doc.save('reportDiscipline.pdf');
  });


</script>